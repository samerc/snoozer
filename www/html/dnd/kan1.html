<!-- http://orangeloops.com/2016/07/how-to-create-a-kanban-board-with-jquery/ -->

<!doctype html>
<html lang="en">
<head>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <link rel="stylesheet" href="https://jqueryui.com/resources/demos/style.css">
  <style>
  body {font-family:Arial;}
  h2 {margin:5px;}
  input[type=text] {margin:10px}
  input[type=button] {margin:10px}  

  .container {width: 20%; float:left;clear: right;margin:10px; border-radius: 5px;  max-height:95vh; overflow: auto;}
  .sortable { list-style-type: none; margin:0; padding:2px; min-height:30px; border-radius: 5px;}
  .sortable li { margin: 3px 3px 3px 3px; padding: 0.4em; padding-left: 1.5em; font-size: 1em; } <!-- height: 200px;}-->
  .sortable li span { position: absolute; margin-left: -1.3em; }
  
  .card{background-color:white;border-radius:3px;}
  </style>
  <script>
  $(function() {
	var oldList, newList, item;
	
    $( ".sortable" ).sortable({
      connectWith: ".connectedSortable",
      receive: function( event, ui ) {
      	//$(this).css({"background-color":"blue"});
		//alert("receive!");
        //$(this).addClass( "ui-state-highlight" );
      },
	  
	  start: function(event, ui) {
		item = ui.item;
        newList = oldList = ui.item.parent().parent();
      },
	  
	  update: function( event, ui ) {
           // do stuff
		   //alert("update!");
		   var order1 = $('#ToDo').sortable('toArray').toString();
           var order2 = $('#Progress').sortable('toArray').toString();
		   var orderDelay 	  = $('#ToDo').sortable('serialize');
		   var orderDelegated = $('#Progress').sortable('serialize');
            
			//alert(data);
           //alert("Order 1:" + order1 + "\n Order 2:" + order2); //Just showing update
		   //alert($(this).id);
           //var order = $(this).sortable('serialize');
		   //alert order;

	  },
	  
	  change: function(event, ui) {  
		if(ui.sender) newList = ui.placeholder.parent().parent();
      },
	  
	  stop: function ( event, ui ){
           // do stuff
		   //alert("stop!");
		     alert("Moved " + item.attr('id') + " from " + oldList.attr('id') + " to " + newList.attr('id'));
	  },
	  
  	  success: function(html){

		alert(html);

	  }
    }).disableSelection(); 
	
	/*
    $('.add-button').click(function() {
    	var txtNewItem = $('#new_text').val();
    	$(this).closest('div.container').find('ul').append('<li class="card">'+txtNewItem+'</li>');
    });  */ 

	/*$("html").on("drop", function(event) {
		event.preventDefault();  
		event.stopPropagation();
		alert("Dropped!");
	});*/	
  });

  </script>      
</head>
<body>
</body>
<div>
<div id="Delayed" class="container" style="background-color:pink;">
<h2>Delayed</h2>
<ul id="ToDo" class="sortable connectedSortable">
  <li class="card" id="Todo_1">CAS-04688-K0V4N9 - Vitas - Admin accounts are not displayed in Office 365 <hr /> <a href="https://blog.remembr.co" target="_blank">release</a></li>
  <li class="card" id="Todo_2">Activity A2</li>
  <li class="card" id="Todo_3">Activity A3</li>
</ul>
<!--
<div class="link-div">
	<input type="text" id="new_text" value=""/>
	<input type="button" name="btnAddNew" value="Add" class="add-button"/>
</div>
-->
</div>
<div id="Delegated" class="container" style="background-color:orange;">
<h2>Delegated</h2>
<ul id="Progress" class="sortable connectedSortable" >
  <li class="card" id="Progress_1">Activity B1</li>
  <li class="card" id="Progress_2">Activity B2</li>
</ul>
</div>
<div class="container" style="background-color:yellow;">
<h2>Doing</h2>
<ul class="sortable connectedSortable" >
  <li class="card">Activity C1</li>
  <li class="card">Activity C2</li>
</ul>
</div>
<div class="container" style="background-color:green;">
<h2>Dusted</h2>
<ul class="sortable connectedSortable" >
</ul>
</div>
</div>
</html>